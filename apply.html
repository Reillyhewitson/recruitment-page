<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hot Beans Web - Apply</title>
    <link rel="stylesheet" href="lib/css/bulma.css">
    <link rel="stylesheet" href="lib/css/index.css">
    <link rel="stylesheet" href="lib/css/bulma-timeline.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
</head>
<body>
    <section class="section">
        <div class="columns">
            <div class="column">
                <div class="container">
                <h1 id="a" class="title"></h1>
            
            <div class="field">
                <label class="label">Name</label>
                <div class="control has-icons-left">
                    <input class="input" type="text" placeholder="Name">
                    <span class="icon is-small is-left">
                        <i class="fas fa-user"></i>
                    </span>
                </div>
            </div>
            <div class="field">
                <label class="label">Email</label>
                <div class="control has-icons-left">
                    <input class="input" type="email" placeholder="Email input">
                    <span class="icon is-small is-left">
                        <i class="fas fa-envelope"></i>
                    </span>
                </div>
            </div>
            <label class="label">Salary Expectation</label>
            <div class="field has-addons">
                <div class="control">
                  <span class="select">
                    <select>
                      <option>$</option>
                      <option>£</option>
                      <option>€</option>
                    </select>
                  </span>
                </div>
                <p class="control">
                  <input class="input" type="text" placeholder="£$€">
                </p>
            </div>
            <label class="label">Upload Your CV</label>
            <div class="file has-name">
                <label class="file-label">
                  <input class="file-input" type="file" id="upload" name="resume" oninput="updateFile()">
                  <span class="file-cta">
                    <span class="file-icon">
                      <i class="fas fa-upload"></i>
                    </span>
                    <span class="file-label">
                      Choose a file…
                    </span>
                    <span class="file-name" id="fileName">
                        No file uploaded
                      </span>
                  </span>
                </label>
              </div>
              <div class="field">
                <label class="label">Tell us a bit about you</label>
                <div class="control">
                    <textarea class="textarea" type="text" placeholder="A bit about you..."></textarea>
                </div>
            </div>
            <button class="button is-primary" type="submit" onclick="transmit()" id="submitter">Submit</button>
        </div>
        </div>
        <div class="column is-one-quarter has-background-light">
            <div class="timeline">
            <header class="timeline-header">
                <span class="tag is-medium is-primary">Begin</span>
            </header>
            <div class="timeline-item is-success">
                <div class="timeline-marker is-icon is-success">
                    <i class="fas fa-flag"></i>
                </div>
                <div class="timeline-content">
                    <p class="heading">Apply</p>
                    <p>You're here now! Great work!</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-marker is-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <div class="timeline-content">
                    <p class="heading">First Interview</p>
                    <p>This makes sure you know your stuff. No need to swot up as it's nothing too hard.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-marker is-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="timeline-content">
                    <p class="heading">Second Interview</p>
                    <p>Another interview with your (hopefully) future team mates. Come as yourself and if you fit in you'll get the job!</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-marker is-icon">
                    <i class="fas fa-file-signature"></i>
                </div>
                <div class="timeline-content">
                    <p class="heading">Contract</p>
                    <p>Formalities to get you through the door.</p>
                </div>
            </div>
            <header class="timeline-header">
                <span class="tag is-medium is-primary">Hired!</span>
            </header>
        </div>
        </div>
    </section>
    
    
    
    
    
    <script>
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        var job = getParameterByName("j");
        console.log(job)
        document.getElementById("a").innerText = "Thank you for applying to become our new "+job+"!"

        function updateFile(){
            var fullPath = document.getElementById('upload').value;
            if (fullPath) {
                var startIndex = (fullPath.indexOf('\\') >= 0 ? fullPath.lastIndexOf('\\') : fullPath.lastIndexOf('/'));
                var filename = fullPath.substring(startIndex);
                if (filename.indexOf('\\') === 0 || filename.indexOf('/') === 0) {
                    filename = filename.substring(1);
                }
                document.getElementById("fileName").innerText = filename;
            }
        }

        function transmit(){
            button = document.getElementById("submitter")
            button.classList.add("is-loading")
            setTimeout(() => { window.open("success.html", "_self")}, 1000)
        }
    </script>
</body>
</html>